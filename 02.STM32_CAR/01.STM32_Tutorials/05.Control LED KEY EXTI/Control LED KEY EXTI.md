# Control LED KEY EXTI

教程简要说明使用KEY2控制LED亮灭。

```
KEY:轮询方式检查按键状态并控制LED反转
KEY2:中断方式检查按键状态并控制LED反转
```

## 开发思路

硬件连接（硬件原理图） → 引脚驱动（数据手册）→ 外设控制（参考手册）

软件配置：硬件时钟 → 配置硬件模式 → 硬件使能

### 硬件连接

| 开发板        | 引脚 | 外设 | 硬件连接                           |
| ------------- | ---- | ---- | ---------------------------------- |
| STM32F103C8T6 | PA0  | KEY2 | 按键（KEY2）一端接PA0，另一端接GND |
| STM32F103RCT6 | PA0  | KEY2 | 按键（KEY2）一端接PA0，另一端接GND |

### 引脚驱动

引脚的默认和复用功能对应不同的初始化方式。

| 开发板        | 引脚     | 主功能（复位后） | 默认复用功能                                               | 重定义功能 |
| ------------- | -------- | ---------------- | ---------------------------------------------------------- | ---------- |
| STM32F103C8T6 | PA0-WKUP | PA0              | WKUP/USART2_CTS/ADC12_IN0/TIM2_CH1_ETR                     |            |
| STM32F103RCT6 | PA0-WKUP | PA0              | WKUP/USART2_CTS/ADC123_IN0/TIM2_CH1_ETR/ TIM5_CH1/TIM8_ETR |            |

### 外设控制

通过设置外部中断触发条件控制LED亮灭。

> **STM32F103C8T6**

PA0产生下降沿触发外部中断，在中断函数中切换LED状态。